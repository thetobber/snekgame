const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const S of c.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&f(S)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function f(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}};z();const A=document.querySelector("#score"),p=document.querySelector("#toggle"),x=document.querySelector("#reset"),R=document.querySelector("#rotate"),i=document.querySelector("#canvas"),s=i.getContext("2d");let u=!1,y=!1,l=10,g=l,h=0,r=3,a=E(),m=10,d=w(),v=0;function q(e,t,n){return Math.round((Math.random()*(t-e)+e)/n)*n}function E(){const e=i.width/2-l*3,t=i.height/2;let n=[];for(let f=0;f<3;f++)n.push([e+l*f,t]);return n.reverse()}function F(){for(const e of a)s.fillStyle="lightgreen",s.strokeStyle="darkgreen",s.fillRect(e[0],e[1],l,l),s.strokeRect(e[0],e[1],l,l)}function w(){const e=q(0,i.width,m),t=q(0,i.height,m);let n;for(const f of a)f[0]===e&&f[1]===t?w():n=[e,t];return n}function T(){s.fillStyle="pink",s.strokeStyle="darkred",s.fillRect(d[0],d[1],m,m),s.strokeRect(d[0],d[1],m,m)}function I(){let e=a[0][0]+g,t=a[0][1]+h;e===i.width?e=0:e===-l?e=i.width-l:t===i.height?t=0:t===-l&&(t=i.height-l);for(let n=0;n<a.length;n++)n!==0&&a[n][0]===e&&a[n][1]===t&&(y=!0);a.unshift([e,t]),e===d[0]&&t===d[1]?(d=w(),v+=1,b()):a.pop()}function k(){u?p.innerText="Pause (Space)":p.innerText="Resume (Space)"}function b(){A.innerText=v.toString()}function M({key:e}){if(e=e.toLowerCase(),e==="escape"){L();return}e===" "&&(u=!u,k()),u&&((e==="w"||e==="arrowup")&&r!==0&&r!==2?(r=0,g=0,h=-10):(e==="a"||e==="arrowleft")&&r!==1&&r!==3?(r=1,g=-10,h=0):(e==="s"||e==="arrowdown")&&r!==2&&r!==0?(r=2,g=0,h=10):(e==="d"||e==="arrowright")&&r!==3&&r!==1&&(r=3,g=10,h=0))}function B(){s.fillStyle="lightgray",s.clearRect(0,0,i.width,i.height),s.fillRect(0,0,i.width,i.height)}function O(){B(),T(),F()}function P(){setTimeout(function(){u&&(B(),T(),I(),F()),y&&L(),requestAnimationFrame(P)},100)}function L(){y=!1,u=!1,v=0,r=3,g=l,h=0,a=E(),d=w(),console.log(r,g,h),b(),k(),O()}window.addEventListener("resize",()=>u=!1);window.addEventListener("keydown",M);p.addEventListener("click",function(){u=!u,k(),p.blur()});x.addEventListener("click",function(){L(),x.blur()});R.addEventListener("input",function(){i.style.transform=`rotate(${R.value}deg)`});O();requestAnimationFrame(P);
